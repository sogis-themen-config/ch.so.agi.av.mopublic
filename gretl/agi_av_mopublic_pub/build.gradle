import ch.so.agi.gretl.tasks.*
import java.nio.file.Paths
import de.undercouch.gradle.tasks.download.Download

apply plugin: "ch.so.agi.gretl"
apply plugin: "de.undercouch.download"

defaultTasks 'importData'

def pathToTempFolder = System.getProperty('java.io.tmpdir')

def dataSets = ['2546', '2581', '2601']

dataSets.each { dataSet ->

    def dataSetFile = "ilidata:"+dataSet+".ch.so.agi.av.mopublic"
    println(dataSetFile)

/*
    tasks.register("importData_$dataSet", Ili2pgReplace) {
        database = [dbUriPub, dbUserPub, dbPwdPub]
        dbschema = "agi_av_mopublic_pub_v1"
        dataFile = dataSetFile
        dataset = dataSet
        disableValidation = true
    }
    */
}

task importData() {
    description = "Import all datasets."
    dependsOn {
        tasks.findAll { task -> task.name.startsWith('importData_') }
    }
}
